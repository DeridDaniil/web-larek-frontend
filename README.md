# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

Данные проекта.

``` typescript
export interface IProduct {
  id: string,
  category: string,
  title: string,
  image: string,
  price: number | null;
  description: string,
  buttonText: string;
  index: string;
}

export type TBasketProduct = Pick<IProduct, 'title' | 'price'>;

export interface IPayment {
  address: string;
  payment: string;
}

export interface IContact {
  email: string;
  phone: string;
}

export type FormErrors = Partial<Record<keyof IOrder, string>>;

export interface IOrder extends IPayment, IContact {
  items: string[],
  total: number;
}

export interface IOrderResult {
  id: string,
  items: string[],
  total: number;
}
```

Описание проекта.

Класс Api ('/src/components/base/api.ts') - содержит в себе базовую логику отправки запросов.  
Методы класса:
- Метод get() - возвращает промис с объектом, которым ответил сервер.
- Метод post() - принимает объект с данными и отпровляет эти данных на сервер в формате JSON.

Класс EventEmitter ('./src/components/base/events.ts/') - брокер событий, классическая реализация, предоставляет подписываться на события и отправлять события.  
Методы класса:
- Метод on() - устанавливает обработчик события.
- Метод off() - снимает обработчик события.
- Метод emit() - инициализирует событие с данными.
- Метод onAll() - слушает все события.
- Метод ofAll() - сбрасывает все обработчики.
- Метод trigger() - делает коллбек триггер, генерирующий событие при вызове.

Класс Component абстрактный класс, реализован для управления разметкой и создания компонентов пользовательского интерфейса.  
Методы класса:
- toggleClass() - переключает класс элемента.
- setText() - устанавливает текстовое содержимое элемента.
- setDisabled() - устанавливает состояние отключения элемента.
- setHidden() - скрывает элемент.
- setVisible() - показывает элемент
- setImage() - устанавливает источник и альтернативный текст для изображения.
- render() - отрисовывает компонент, при необходимости обновляя его данные.

Класс Model абстрактный класс для управления данными и событиями в приложении.  
Методы класса:
- emitChanges() - генерирует событие с указанным именем и полезной нагрузкой.

Класс ProductApi расширяет базовый класс Api и предназначен для работы с API товаров.  
Свойства класса:
- cdn - URL для загрузки изображений продукта.
  
Методы класса:
- getCatalog() - получает список всех продуктов из каталога.
- postOrder() - отправляет данные о заказе на сервер. 

Класс Card расширяет базовый класс Component и отвечает за хранение и логику работы с данными товара. Конструктор принимает брокер событий.  
Свойства класса:
- _category - категория товара.
- _title - название товара.
- _image - изображение товара.
- _price - цена продукта.
- _description - описание товара.
- _buttonText - текст кнопки.
- _index - индекс товара в корзине
- _button - кнопка, для взаимодействия с карточкой товара.
  
Методы класса:
- set id() - устанавливает id карточки.
- get id() - возвращает id карточки.
- set title() - устанавливает название товара.
- get title() - возвращает название товара.
- set image() - устанавливает изображение товара.
- set price() - устанавливает цену товара.
- set description() - устанавливает описание товара.
- set index() - устанавливает индекс товара в корзине.
- get index() - возвращает индекс товара в корзине.
- set category() - устанавливает категорию товара.
- get category() - возвращает категорию товара.
- set buttonText() - устанавливает текст кнопки.
- buttonDisabled() - устанавливает состояние отключения кнопки

Класс AppState расширяет базовый класс Model и предназначен для управления состоянием приложения.  
Свойства класса: 
- catalog - каталог товаров.
- basket - корзина с товарами.
- order - текущий заказ.
- preview - предпросмотр товара.
- events - события, которые могут быть вызваны для обработки изменений состояия.
- formErrors - ошибки формы, используемые для валидации данных заказа.
  
Методы класса:
- setCatalog() - устанавливает каталог товаров.
- setPreview() - устанавливает товар для предпросмотра.
- addBasketProduct() - добавляет товар в корзину.
- removeBasketProduct() - удаляет товар из корзины.
- clearBasket() - очищает корзину.
- updateBasket() - обновляет состояние корзины.
- setPayment() - устанавливает значения поля для формы данных об оплате.
- setContact() - устанавливает значения поля для формы данных пользователя.
- clearOrder() - очищает информацию о текущем заказе.
- PaymentValidate() - валидирует форму данных об оплате.
- ContactValidate() - валидирует форму данных пользователя.

Класс Page расширяет базовый класс Component и предназначен для управления основными элементами страницы приложения.  
Свойства класса:
- _counter - счетчик товаров в корзине.
- _catalog - каталог товаров.
- _wrapper - обертка страницы.
- _basket - кпнока корзины.
  
Методы класса: 
- set counter() - устанавливает значение счетчика товаров в корзине.
- set catalog() - устанавливает элементы каталога товаров.
- set isLocked() - устанавливает состояние блокировки страницы.

Класс Modal расширяет базовый класс Component и предназначен для управления модальными окнами в приложении.  
Свойства класса:
- _closeButton - кнопка закрытия модального окна.
- _content - содержимое модального окна
  
Методы класса:
- set content() - устанавливает содержимое модального окна.
- open() - открывает модальное окно.
- close() - закрывает модальное окно.
- render() - рендерит данные модального окна и открывает его.

Класс Basket расширяет базовый класс Component и предназначен для управления корзиной в приложении.  
Свойства класса: 
- _list - список товаров в корзине.
- _price - общая цена товаров в корзине.
- _button - кнопка для оформления заказа.
  
Методы класса:
- set list() - устанавливает элементы списка товаров в корзине.
- set selected() - устанавливает состояние кнопки оформления заказа.
- set price() - устанавливает общую цену товаров  в корзине.

Класс Form расширяет базовый класс Component и предназначен для управления формами в приложении.  
Свойства класса:
- _submit - кнопка отправки формы.
- _errors - отображение ошибок формы.
  
Методы класса: 
- protected onInputChange() - обрабатывает изменения ввода в форме и генерирует события.
- set valid() - устанавливает состояние валидности формы.
- set errors() - устанавливает сообщение об ошибки в форме.
- render() - рендерит состояние формы.

Класс Payment расширяет класс Form и предназначен для управления формой данных об оплате в приложении.  
Свойства класса:
- _card - кнопка выбора оплаты онлайн.
- _cash - кнопка выбора оплаты при получении.
  
Методы класса:
- toggleButton() - переключает активное состояние кнопок выбора метода оплаты.
- set address() - устанавливает значения поля адреса доставки в форме.

Класс Contact расширяет класс Form и предназначен для управления формой данных пользователя в приложении.  
Методы класса: 
- set email() - устанавливает значение поля электронной почты в форме.
- set phone() - устанавливает значение поле номера телефона в форме.

Класс Success расширяет базовый класс Component и предназначен для отображения модального окна успешного заказа в приложении.  
Свойства класса:
- _close - кнопка закрытия уведомления об успешном заказе.
- _totalPrice - общая цена заказа.
  
Методы класса: 
- set totalPrice() - устанаваливает текстовое содержимое элемента общей цены заказа.

Список событий:
- order:toggle - переключение кнопки способа оплаты.
- product:change - изменение каталога.
- preview:select - добавления открытия модального окна для каждой карточки товара.
- preview:change - открытие модального окна карточки товара.
- product:toggle - переключение кнопки в модальном окне карточки товара.
- card:add - добавление товара в корзину.
- card:delete - удаление товара из корзины.
- basket:change - изменения в корзине.
- counter:change - изменение счетчика корзины.
- basket:open - открытие модального окна корзины.
- order:open - открытие модального окна с формой данных об оплате.
- formErrors:change - отслеживание ошибок валидации.
- ^order\..*:change - ошибки валидации в форме данных об оплате.
- ^contacts\..*:change - ошибки валидации в форме данных пользователя.
- order:validation - валидация формы данных об оплате.
- contacts:validation - валидация формы данных пользователя.
- order:submit - открытие формы данных пользователя.
- contacts:submit - открытие модального окна об успешном оплате заказа.
- modal:open - блокировка страницы, когда открыто модальное окно.
- modal:close - отмена блокировки страницы, когда открыто модальное окно.